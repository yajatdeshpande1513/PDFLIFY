<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDLIFY</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>

    <header>
        <nav>
            <div class="logo">PDLIFY</div>
            <ul class="nav-links">
                <li><a href="#">Home</a></li>
                <li><a href="/tools">Tools</a></li>
                {% if current_user.is_authenticated %}
                <li><a href="{{ url_for('logout') }}" class="cta-button" style="background: #cc3300;">Log Out</a></li>
                {% else %}
                <li><a href="{{ url_for('login') }}" class="cta-button">Log In</a></li>
                {% endif %}
            </ul>
        </nav>
    </header>

    <main class="container" style="margin-top: 100px;">
        <section class="hero-section">
            <h1 class="main-heading">Convert Any File with Speed.</h1>
            <p class="sub-heading">Your files, instantly converted. Secure & Fast.</p>

            <form action="{{ url_for('convert') }}" method="post" enctype="multipart/form-data">
                <div class="file-upload-card" id="drop-zone">
                    <div class="upload-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" fill="var(--primary-color)" viewBox="0 0 16 16">
                            <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
                            <path d="M8 13A5 5 0 1 1 8 3a5 5 0 0 1 0 10zm0-2a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                        </svg>
                    </div>
                    <p id="file-status">Drag & Drop PDF here, or <span class="browse-link">Browse Files</span></p>
                    <input type="file" id="real-file-input" name="file" accept=".pdf" hidden required>
                </div>
                
                <div class="conversion-options">
                    <p class="text-muted mb-2">Select Output Format:</p>
                    <div class="option-group">
                        <label class="custom-radio">
                            <input type="radio" name="output_format" value="docx" checked>
                            <span class="radio-label">DOCX</span>
                        </label>
                        <label class="custom-radio">
                            <input type="radio" name="output_format" value="txt">
                            <span class="radio-label">TEXT</span>
                        </label>
                    </div>
                </div>

                <button type="submit" class="convert-button" id="submit-btn" disabled>Convert Now</button>
            </form>
        </section>
    </main>

    <script>
        const dropZone = document.getElementById('drop-zone');
        const fileInput = document.getElementById('real-file-input');
        const statusText = document.getElementById('file-status');
        const convertBtn = document.getElementById('submit-btn');

        dropZone.addEventListener('click', () => fileInput.click());

        fileInput.addEventListener('change', function() {
            if (this.files.length > 0) {
                statusText.innerHTML = `<strong>Selected:</strong> ${this.files[0].name}`;
                convertBtn.disabled = false;
                dropZone.style.borderColor = "var(--primary-color)";
            }
        });

        // Drag and Drop Logic
        ['dragover', 'dragleave', 'drop'].forEach(evt => {
            dropZone.addEventListener(evt, e => {
                e.preventDefault();
                if(evt === 'dragover') dropZone.classList.add('dragover');
                else dropZone.classList.remove('dragover');
                
                if(evt === 'drop' && e.dataTransfer.files.length > 0) {
                    fileInput.files = e.dataTransfer.files;
                    statusText.innerHTML = `<strong>Selected:</strong> ${e.dataTransfer.files[0].name}`;
                    convertBtn.disabled = false;
                }
            });
        });
    </script>
</body>
</html>